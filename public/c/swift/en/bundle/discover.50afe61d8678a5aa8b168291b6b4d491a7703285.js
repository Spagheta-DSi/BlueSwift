define("app/ui/discover_nav",["module","require","exports","core/component","app/ui/with_item_actions"],function(module, require, exports) {
function discoverNav(){this.defaultAttrs({itemType:"user"})}var defineComponent=require("core/component"),withItemActions=require("app/ui/with_item_actions");module.exports=defineComponent(discoverNav,withItemActions)
});
define("app/boot/discover",["module","require","exports","app/boot/app","app/boot/trends","app/boot/wtf_module","app/ui/discover_nav"],function(module, require, exports) {
var bootApp=require("app/boot/app"),trends=require("app/boot/trends"),whoToFollowModule=require("app/boot/wtf_module"),DiscoverNav=require("app/ui/discover_nav");module.exports=function(b){bootApp(b),trends(b),whoToFollowModule(".dashboard .js-wtf-module",b),DiscoverNav.attachTo(".discover-nav",{eventData:{scribeContext:{component:"discover_nav"}}})}
});
define("app/ui/timelines/with_most_recent_story_pagination",["module","require","exports"],function(module, require, exports) {
function withMostRecentStoryPagination(){this.modifyCursorsFromResponse=function(a){a=a||{},a.is_scrolling_request&&(this.latest_request_cursor=a.scroll_cursor,a.refresh_cursor=a.scroll_cursor),a.is_refresh_request&&(this.latest_request_cursor=a.refresh_cursor,a.scroll_cursor=a.refresh_cursor,a.refresh_cursor=this.refresh_cursor)},this.updateCursorsAfterInjection=function(){this.refresh_cursor=this.latest_request_cursor,this.scroll_cursor=this.latest_request_cursor}}module.exports=withMostRecentStoryPagination
});
define("app/ui/timelines/discover_timeline",["module","require","exports","core/component","app/utils/cookie","app/ui/timelines/with_base_timeline","app/ui/timelines/with_new_items","app/ui/timelines/with_old_items","app/ui/timelines/with_story_pagination","app/ui/timelines/with_most_recent_story_pagination","core/utils"],function(module, require, exports) {
function discoverTimeline(){this.defaultAttrs({itemType:"story",refreshCookieKey:"disco_refresh_cookie",refreshCookiePath:"/i/discover",discoverDeciders:{discoRefreshCookieEnabled:!1,onlyShowMostRecentStories:!1},affix:"stick-top"}),this.storeRefreshCursor=function(){this.refresh_cursor&&cookie(this.attr.refreshCookieKey,this.refresh_cursor,{path:this.attr.refreshCookiePath,expires:1})},this.handleKoreanHeader=function(){var a=$(window).scrollTop();this.sectionBarOffsetTop<a+$(".global-nav").height()?$(".section-bar").addClass(this.attr.affix):$(".section-bar").removeClass(this.attr.affix)},this.after("initialize",function(){this.attr.discoverDeciders.discoRefreshCookieEnabled&&this.on(document,"uiStoryPaginationReset",this.storeRefreshCursor),this.attr.discoverDeciders.koreanSectionEnabled&&(this.sectionBarOffsetTop=$("#korea_disco_section").offset().top,this.on(window,"scroll",utils.throttle(this.handleKoreanHeader.bind(this)))),this.attr.discoverDeciders.onlyShowMostRecentStories&&(this.before("resetStateVariables",this.modifyCursorsFromResponse),this.before("getNewItems",this.resetLatentItems),this.on("uiHasInjectedNewTimeline",this.updateCursorsAfterInjection))})}var defineComponent=require("core/component"),cookie=require("app/utils/cookie"),withBaseTimeline=require("app/ui/timelines/with_base_timeline"),withNewItems=require("app/ui/timelines/with_new_items"),withOldItems=require("app/ui/timelines/with_old_items"),withStoryPagination=require("app/ui/timelines/with_story_pagination"),withMostRecentStoryPagination=require("app/ui/timelines/with_most_recent_story_pagination"),utils=require("core/utils");module.exports=defineComponent(discoverTimeline,withBaseTimeline,withStoryPagination,withMostRecentStoryPagination,withNewItems,withOldItems)
});
define("app/boot/discover_timeline",["module","require","exports","app/boot/timeline","app/ui/timelines/discover_timeline","core/utils"],function(module, require, exports) {
function initialize(a,b,c,d){var e=utils.merge(a,{endpoint:b,itemType:c,eventData:{scribeContext:{component:d||c}}});timelineBoot(e),DiscoverTimeline.attachTo("#discover-stories",utils.merge(e,{tweetItemSelector:"li.disco-stream-item",refreshOnReturn:!1}))}var timelineBoot=require("app/boot/timeline"),DiscoverTimeline=require("app/ui/timelines/discover_timeline"),utils=require("core/utils");module.exports=initialize
});
define("app/data/topic_pivots_scribe",["module","require","exports","core/component","app/data/with_interaction_data_scribe"],function(module, require, exports) {
function topicPivotsScribe(){this.scribeTopicLabelClick=function(a,b){this.scribeInteraction({element:"topic",action:"click"},b)},this.scribeTopicBackNavClick=function(a,b){this.scribe({element:"back_nav",action:"click"})},this.after("initialize",function(){this.on("uiTopicLabelClick",this.scribeTopicLabelClick),this.on("uiTopicBackNavClick",this.scribeTopicBackNavClick)})}var defineComponent=require("core/component"),withInteractionDataScribe=require("app/data/with_interaction_data_scribe");module.exports=defineComponent(topicPivotsScribe,withInteractionDataScribe)
});
define("app/ui/with_topic_pivots",["module","require","exports","core/compose","app/ui/with_interaction_data"],function(module, require, exports) {
function withTopicPivots(){compose.mixin(this,[withInteractionData]),this.defaultAttrs({topicLabelSelector:".js-topic-label",topicBackNavSelector:".js-topic-back-nav"}),this.topicLabelClick=function(a,b){this.trigger("uiTopicLabelClick",this.interactionData(a))},this.topicBackNavClick=function(a,b){this.trigger("uiTopicBackNavClick")},this.after("initialize",function(){this.on("click",{topicLabelSelector:this.topicLabelClick,topicBackNavSelector:this.topicBackNavClick})})}var compose=require("core/compose"),withInteractionData=require("app/ui/with_interaction_data");module.exports=withTopicPivots
});
define("app/ui/discover",["module","require","exports","core/component","app/ui/with_tweet_actions","app/ui/with_item_actions","app/ui/with_topic_pivots","app/ui/gallery/with_gallery","app/ui/media/with_flag_action"],function(module, require, exports) {
function discoverStories(){this.defaultAttrs({discoverStoriesSelector:"#discover_items .stream-items",itemType:"story"}),this.replaceStories=function(a,b){this.trigger("uiWantsToCloseAllStories"),this.select("discoverStoriesSelector").html(b.items_html),this.trigger("uiTimelineReset",b)},this.after("initialize",function(){this.on(document,"dataStoriesRefreshed",this.replaceStories)})}var defineComponent=require("core/component"),withTweetActions=require("app/ui/with_tweet_actions"),withItemActions=require("app/ui/with_item_actions"),withTopicPivots=require("app/ui/with_topic_pivots"),withGallery=require("app/ui/gallery/with_gallery"),withFlagAction=require("app/ui/media/with_flag_action");module.exports=defineComponent(discoverStories,withTweetActions,withItemActions,withTopicPivots,withGallery,withFlagAction)
});
define("app/pages/discover/discover",["module","require","exports","app/boot/discover","app/boot/discover_timeline","app/boot/activity_popup","app/data/tweet_actions","app/data/topic_pivots_scribe","app/ui/discover","app/data/media_settings","app/ui/media/media_tweets","app/ui/media/sensitive_media_tweets","app/ui/expando/close_all_button","app/ui/expando/expanding_tweets","app/ui/dynamic_card_watcher","app/data/contact_import","app/data/contact_import_scribe","app/ui/who_to_follow/import_loading_dialog","app/ui/who_to_follow/import_services"],function(module, require, exports) {
var discoverBoot=require("app/boot/discover"),discoverTimelineBoot=require("app/boot/discover_timeline"),activityPopupBoot=require("app/boot/activity_popup"),TweetActions=require("app/data/tweet_actions"),TopicPivotsScribe=require("app/data/topic_pivots_scribe"),DiscoverStories=require("app/ui/discover"),MediaSettingsData=require("app/data/media_settings"),MediaTweets=require("app/ui/media/media_tweets"),SensitiveMediaTweets=require("app/ui/media/sensitive_media_tweets"),CloseAllButton=require("app/ui/expando/close_all_button"),ExpandingTweets=require("app/ui/expando/expanding_tweets"),DynamicCardWatcher=require("app/ui/dynamic_card_watcher"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),ImportLoadingDialog=require("app/ui/who_to_follow/import_loading_dialog"),ImportServices=require("app/ui/who_to_follow/import_services");module.exports=function(a){discoverBoot(a),a.infiniteScrollStories&&discoverTimelineBoot(a,a.timelinePath,"story"),activityPopupBoot(a),TweetActions.attachTo(document,a),MediaSettingsData.attachTo(document,a),DiscoverStories.attachTo("#discover-stories",a),TopicPivotsScribe.attachTo(document),MediaTweets.attachTo("#discover-stories",a),SensitiveMediaTweets.attachTo(document,a),ExpandingTweets.attachTo("#discover-stories",a),CloseAllButton.attachTo("#close-all-button",{where:"#discover-stories"}),DynamicCardWatcher.attachTo(window,{containerSelector:"#discover-stories"}),ContactImportData.attachTo(document,a),ContactImportScribe.attachTo(document,a),ImportLoadingDialog.attachTo("#import-loading-dialog",a),ImportServices.attachTo(".dashboard .import-prompt",a,{otherServicesSelector:".other-services",eventData:{scribeContext:{component:"user_recommendations",element:"wtf_import_prompt"}}})}
});
define("app/ui/people_search_input",["module","require","exports","core/component"],function(module, require, exports) {
function peopleSearchInput(){this.submitQuery=function(a,b){var c=$(a.target).find('input[name="q"]').val();if(c==""){a.preventDefault();return}this.trigger("uiSearchQuery",{query:c,source:"search"})},this.after("initialize",function(){this.on("submit",this.submitQuery)})}var defineComponent=require("core/component");module.exports=defineComponent(peopleSearchInput)
});
define("app/boot/who_to_follow",["module","require","exports","app/boot/discover","app/boot/user_timeline","app/ui/people_search_input"],function(module, require, exports) {
var discoverBoot=require("app/boot/discover"),userTimelineBoot=require("app/boot/user_timeline"),PeopleSearchInput=require("app/ui/people_search_input");module.exports=function(a){discoverBoot(a),userTimelineBoot(a,a.timeline_url,"user","user"),PeopleSearchInput.attachTo(".content-main .js-search-form",{eventData:{scribeContext:{component:"user_search_form",element:""}}})}
});
define("app/utils/common_regexp",["module","require","exports"],function(module, require, exports) {
module.exports={name:/\S+/,ampersat:/^[@＠]$/,usernameForSignup:/^[@＠]?([a-zA-Z0-9_]{1,15})$/,email:/^[\w-]+([^@,\s\<\>\(\)]*[\w-]+)?\@[\w-]+(\.[\w-]+)*\.[a-z]{2,}$/i,end:"end"}
});
define("app/ui/who_to_follow/invite_form",["module","require","exports","core/component","core/i18n","app/utils/common_regexp","app/ui/who_to_follow/with_invite_messages","app/ui/who_to_follow/with_invite_preview"],function(module, require, exports) {
function inviteForm(){this.defaultAttrs({addressesFieldSelector:'textarea[name="addresses"]'}),this.parseEmailAddress=function(a){var b=regexps.email.exec(a.replace(/^\s+|\s+$/g,""));return b?b[0]:null},this.extractEmailAddresses=function(a){if(a.indexOf("<")==-1){a=a.replace(/\n+/g,", ");var b=a.split(","),c=b.map(this.parseEmailAddress);return c.filter(function(a){return!!a})}return[a]},this.submitAddresses=function(a){a.preventDefault();var b=this.select("addressesFieldSelector");if(b.is(":disabled"))return;var c=this.select("addressesFieldSelector").val();if(c.trim()=="")return;var d=this.extractEmailAddresses(c);d.length?(b.attr("disabled",!0).val(d.join(", ")),this.trigger("uiInviteContacts",{contacts:d.map(function(a){return{email:a}})})):this.trigger("uiShowError",{message:_('Please check the address you entered.')})},this.clearAddressesField=function(){this.select("addressesFieldSelector").val("").removeClass("expanded")},this.reenableAddressesField=function(){this.select("addressesFieldSelector").attr("disabled",!1)},this.maybeExpandAddressesField=function(a){var b=$(a.target);(a.which==13||b.val().indexOf(",")>0)&&b.addClass("expanded")},this.after("initialize",function(){this.on("keyup",{addressesFieldSelector:this.maybeExpandAddressesField}),this.on("submit",this.submitAddresses),this.on("uiInviteFinished",this.clearAddressesField),this.on(document,"dataInviteContactsSuccess dataInviteContactsFailure",this.reenableAddressesField),this.attr.previewInviteSelector=".fine-print .js-popup"})}var defineComponent=require("core/component"),_=require("core/i18n"),regexps=require("app/utils/common_regexp"),withInviteMessages=require("app/ui/who_to_follow/with_invite_messages"),withInvitePreview=require("app/ui/who_to_follow/with_invite_preview");module.exports=defineComponent(inviteForm,withInviteMessages,withInvitePreview)
});
define("app/ui/who_to_follow/pymk_kicker",["module","require","exports","core/component"],function(module, require, exports) {
function pymkKicker(){this.after("initialize",function(){this.on(document,"uiSwiftLoaded",function(){$(document).trigger("uiNearTheBottom")})})}var defineComponent=require("core/component");module.exports=defineComponent(pymkKicker)
});
define("app/ui/who_to_follow/wipe_addressbook_dialog",["module","require","exports","core/component","core/i18n","app/ui/with_position","app/ui/with_dialog"],function(module, require, exports) {
function wipeAddressbookDialog(){this.defaultAttrs({wipeAddressbookLinkSelector:".js-wipe-addressbook",wipeAddressbookSelector:".wipe-addressbook-action"}),this.linkOpen=function(a){a.preventDefault(),this.open()},this.wipeAddressbook=function(){this.trigger("uiWantsAddressbookWiped"),this.close()},this.wipeSucceeded=function(){this.trigger("uiShowMessage",{message:_('Your contacts have been removed.')})},this.wipeFailed=function(){this.trigger("uiShowError",{message:_('Oops, we couldn\'t remove your contacts at this time.')})},this.after("initialize",function(){this.on("click",{wipeAddressbookSelector:this.wipeAddressbook}),this.on(document,"dataWipeAddressbookSuccess",this.wipeSucceeded),this.on(document,"dataWipeAddressbookFailure",this.wipeFailed),this.on(document,"click",{wipeAddressbookLinkSelector:this.linkOpen})})}var defineComponent=require("core/component"),_=require("core/i18n"),withPosition=require("app/ui/with_position"),withDialog=require("app/ui/with_dialog");module.exports=defineComponent(wipeAddressbookDialog,withDialog,withPosition)
});
define("app/pages/who_to_follow/import",["module","require","exports","app/boot/who_to_follow","app/boot/user_completion_module","app/data/contact_import","app/data/contact_import_scribe","app/ui/who_to_follow/import_loading_dialog","app/ui/who_to_follow/import_services","app/ui/who_to_follow/invite_form","app/ui/who_to_follow/pymk_kicker","app/ui/who_to_follow/wipe_addressbook_dialog"],function(module, require, exports) {
var whoToFollowBoot=require("app/boot/who_to_follow"),userCompletionModuleBoot=require("app/boot/user_completion_module"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),ImportLoadingDialog=require("app/ui/who_to_follow/import_loading_dialog"),ImportServices=require("app/ui/who_to_follow/import_services"),InviteForm=require("app/ui/who_to_follow/invite_form"),PymkKicker=require("app/ui/who_to_follow/pymk_kicker"),WipeAddressbookDialog=require("app/ui/who_to_follow/wipe_addressbook_dialog");module.exports=function(a){whoToFollowBoot(a),userCompletionModuleBoot(a),ContactImportData.attachTo(document,a),ContactImportScribe.attachTo(document,a),PymkKicker.attachTo("#timeline"),ImportLoadingDialog.attachTo("#import-loading-dialog",a),ImportServices.attachTo("#import-services-list",{hasUserCompletionModule:a.hasUserCompletionModule,eventData:{scribeContext:{component:"import_service_stream"}}}),InviteForm.attachTo(".content-header .invite-friends",{eventData:{scribeContext:{component:"invite_friends"}}}),WipeAddressbookDialog.attachTo("#wipe-addressbook-dialog",a)}
});
define("app/pages/who_to_follow/interests",["module","require","exports","app/boot/who_to_follow","app/data/contact_import","app/data/contact_import_scribe","app/ui/who_to_follow/import_loading_dialog","app/ui/who_to_follow/import_services"],function(module, require, exports) {
var whoToFollowBoot=require("app/boot/who_to_follow"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),ImportLoadingDialog=require("app/ui/who_to_follow/import_loading_dialog"),ImportServices=require("app/ui/who_to_follow/import_services");module.exports=function(a){whoToFollowBoot(a),ContactImportData.attachTo(document,a),ContactImportScribe.attachTo(document,a),ImportLoadingDialog.attachTo("#import-loading-dialog",a),ImportServices.attachTo(".dashboard .import-prompt",a,{otherServicesSelector:".other-services",eventData:{scribeContext:{component:"user_recommendations",element:"wtf_import_prompt"}}})}
});
define("app/pages/who_to_follow/invite",["module","require","exports","app/boot/who_to_follow","app/data/contact_import","app/data/contact_import_scribe","app/ui/infinite_scroll_watcher","app/ui/who_to_follow/unmatched_contacts_list"],function(module, require, exports) {
var whoToFollowBoot=require("app/boot/who_to_follow"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),InfiniteScrollWatcher=require("app/ui/infinite_scroll_watcher"),UnmatchedContactsList=require("app/ui/who_to_follow/unmatched_contacts_list");module.exports=function(a){whoToFollowBoot(a),ContactImportData.attachTo(document,a),ContactImportScribe.attachTo(document,a),InfiniteScrollWatcher.attachTo(".scrolling-user-list",{contentSelector:".stream"}),UnmatchedContactsList.attachTo(".content-main")}
});
define("app/pages/who_to_follow/lifeline",["module","require","exports","app/boot/discover","app/boot/user_timeline","app/ui/people_search_input"],function(module, require, exports) {
var discoverBoot=require("app/boot/discover"),userTimelineBoot=require("app/boot/user_timeline"),PeopleSearchInput=require("app/ui/people_search_input");module.exports=function(a){discoverBoot(a),userTimelineBoot(a,a.timeline_url,"user","user"),PeopleSearchInput.attachTo(".content-main .js-search-form",{eventData:{scribeContext:{component:"user_search_form",element:""}}})}
});
define("app/pages/who_to_follow/matches",["module","require","exports","app/boot/who_to_follow","app/data/contact_import","app/data/contact_import_scribe","app/ui/infinite_scroll_watcher","app/ui/who_to_follow/matched_contacts_list"],function(module, require, exports) {
var whoToFollowBoot=require("app/boot/who_to_follow"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),InfiniteScrollWatcher=require("app/ui/infinite_scroll_watcher"),MatchedContactsList=require("app/ui/who_to_follow/matched_contacts_list");module.exports=function(a){whoToFollowBoot(a),ContactImportData.attachTo(document,a),ContactImportScribe.attachTo(document,a),InfiniteScrollWatcher.attachTo(".scrolling-user-list",{contentSelector:".stream"}),MatchedContactsList.attachTo(".content-main")}
});
define("app/pages/who_to_follow/suggestions",["module","require","exports","app/boot/who_to_follow","app/boot/user_completion_module","app/data/contact_import","app/data/contact_import_scribe","app/ui/who_to_follow/import_loading_dialog","app/ui/who_to_follow/import_services"],function(module, require, exports) {
var whoToFollowBoot=require("app/boot/who_to_follow"),userCompletionModuleBoot=require("app/boot/user_completion_module"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),ImportLoadingDialog=require("app/ui/who_to_follow/import_loading_dialog"),ImportServices=require("app/ui/who_to_follow/import_services");module.exports=function(a){whoToFollowBoot(a),userCompletionModuleBoot(a),ContactImportData.attachTo(document,a),ContactImportScribe.attachTo(document,a),ImportLoadingDialog.attachTo("#import-loading-dialog",a),ImportServices.attachTo(".dashboard .import-prompt",a,{otherServicesSelector:".other-services",eventData:{scribeContext:{component:"user_recommendations",element:"wtf_import_prompt"}}})}
});
define("app/data/who_to_follow/web_personalized_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function WebPersonalizedScribe(){this.defaultAttrs({inEU:!1,doNotTrack:!1}),this.scribeWebPersonalizationImpression=function(){this.attr.inEU&&this.scribe({element:"eu",action:"impression"}),this.attr.doNotTrack&&this.scribe({element:"dnt",action:"impression"})},this.scribeSignupForm=function(){this.scribe({section:"signup_callout",component:"form",action:"signup_click"})},this.after("initialize",function(){this.on("uiWebPersonalizationImpression",this.scribeWebPersonalizationImpression),["uiAllowWebPersonalization","uiDisallowWebPersonalization","uiTurnoffWebPersonalization"].forEach(function(a){this.on(a,function(a,b){this.scribe($.extend(b,{component:"settings",action:"click"}))})}.bind(this)),this.on("uiScribeSignupForm",this.scribeSignupForm)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(WebPersonalizedScribe,withScribe)
});
define("app/data/who_to_follow/web_personalized_proxy",["module","require","exports","core/component","app/data/with_data","core/i18n"],function(module, require, exports) {
function WebPersonalizedProxy(){this.updatePersonalizationSettings=function(a,b,c){this.attr.loggedIn?this.post({url:"/account/update_personalization_settings.json",eventData:null,headers:{"X-PHX":"true"},data:{use_cookie_personalization:a,cookie_personalization_prompt_displayed:!0},success:b.bind(this),error:c.bind(this)}):a?b.bind(this)():this.post({url:"/account/turn_off_cookie_personalization.json",eventData:null,headers:{"X-PHX":"true"},data:{},success:b.bind(this),error:c.bind(this)})},this.getRecommendedUsers=function(){var a=function(){this.trigger("dataUserRecommendationsError"),this.trigger("uiShowError",{message:_('We can&#8217;t show you tailored suggestions at this time. Please try again later.')})};this.post({url:"/i/users/suggested_web_personalized_users",dataType:"json",eventData:null,headers:{"X-PHX":"true"},data:{page:this.attr.pageName,section:this.attr.sectionName,limit:6},success:"dataUserRecommendationsInitialResults",error:a.bind(this)})},this.allowWebPersonalization=function(){var a=function(){this.trigger("dataGetRecommendedUsers")},b=function(){this.trigger("uiShowError",{message:_('We&#8217;re not able to set your preference at this time. Please try again later.')})};this.updatePersonalizationSettings(!0,a,b)},this.disallowWebPersonalization=function(){var a=function(){this.attr.loggedIn?this.trigger("uiShowMessage",{message:_('Thanks. We&#8217;ve set your preference. This will go into effect on other browsers once you log into Twitter on that browser.')}):this.trigger("uiShowMessage",{message:_('Thanks. We&#8217;ve set your preference.')}),this.trigger("uiGoToHomePage")},b=function(){this.trigger("uiShowError",{message:_('We&#8217;re not able to set your preference at this time. Please try again later.')})};this.updatePersonalizationSettings(!1,a,b)},this.after("initialize",function(){this.on("uiAllowWebPersonalization",this.allowWebPersonalization),this.on("uiDisallowWebPersonalization",this.disallowWebPersonalization),this.on("uiTurnoffWebPersonalization",this.disallowWebPersonalization),this.on("dataGetRecommendedUsers",this.getRecommendedUsers)})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),_=require("core/i18n");module.exports=defineComponent(WebPersonalizedProxy,withData)
});
define("app/ui/who_to_follow/web_personalized_settings",["module","require","exports","core/component","app/ui/with_item_actions","app/ui/with_user_actions"],function(module, require, exports) {
function WebPersonalizedSettings(){this.defaultAttrs({allowBtnSelector:".js-web-personalization-allow",disallowBtnSelector:".js-web-personalization-disallow",turnoffBtnSelector:".js-web-personalization-turnoff",spinnerSelector:".web-personalization-inner.web-personalization-allowed",allowDisallowSelector:".web-personalization-allow-disallow",resultsSelector:".web-personalization-results",turnoffSelector:".web-personalization-footer.web-personalization-allowed",itemType:"user"}),this.allowWebPersonalization=function(){this.trigger("uiAllowWebPersonalization",{element:"allow"})},this.disallowWebPersonalization=function(){this.trigger("uiDisallowWebPersonalization",{element:"disallow"})},this.turnoffWebPersonalization=function(){this.trigger("uiTurnoffWebPersonalization",{element:"turnoff"})},this.goToHomePage=function(){this.trigger("uiNavigate",{href:"/"})},this.showLoadingSpinner=function(){this.select("allowDisallowSelector").removeClass("visible"),this.select("resultsSelector").removeClass("visible"),this.select("spinnerSelector").addClass("visible"),this.select("turnoffSelector").addClass("visible")},this.showExplanation=function(){this.select("allowDisallowSelector").addClass("visible"),this.select("resultsSelector").removeClass("visible"),this.select("spinnerSelector").removeClass("visible"),this.select("turnoffSelector").removeClass("visible")},this.showResults=function(a,b){this.select("spinnerSelector").removeClass("visible");var c=this.select("resultsSelector");b&&b.html&&c.html(b.html),c.addClass("visible"),this.select("turnoffSelector").addClass("visible")},this.after("initialize",function(){this.on("click",{allowBtnSelector:this.allowWebPersonalization,disallowBtnSelector:this.disallowWebPersonalization,turnoffBtnSelector:this.turnoffWebPersonalization}),this.on("uiAllowWebPersonalization",this.showLoadingSpinner),this.on("uiDisallowWebPersonalization",this.showLoadingSpinner),this.on("uiTurnoffWebPersonalization",this.showLoadingSpinner),this.on(document,"dataUserRecommendationsError",this.showExplanation),this.on(document,"dataUserRecommendationsInitialResults",this.showResults),this.on(document,"uiGoToHomePage",this.goToHomePage),this.attr.showResults&&this.trigger("uiAllowWebPersonalization"),this.trigger("uiWebPersonalizationImpression")})}var defineComponent=require("core/component"),withItemActions=require("app/ui/with_item_actions"),withUserActions=require("app/ui/with_user_actions");module.exports=defineComponent(WebPersonalizedSettings,withItemActions,withUserActions)
});
define("app/ui/who_to_follow/web_personalized_signup",["module","require","exports","core/component"],function(module, require, exports) {
function WebPersonalizedSignup(){this.defaultAttrs({signupBtnSelector:".js-web-personalization-signup .signup-btn"}),this.scribeSignupForm=function(){this.trigger("uiScribeSignupForm")},this.showForm=function(){this.attr.loggedIn||this.$node.addClass("visible")},this.hideForm=function(){this.$node.removeClass("visible")},this.after("initialize",function(){this.on("click",{signupBtnSelector:this.scribeSignupForm}),this.on(document,"uiAllowWebPersonalization",this.showForm),this.on(document,"uiTurnoffWebPersonalization",this.hideForm)})}var defineComponent=require("core/component");module.exports=defineComponent(WebPersonalizedSignup)
});
define("app/pages/who_to_follow/web_personalized",["module","require","exports","app/boot/app","app/boot/logged_out","app/data/who_to_follow/web_personalized_scribe","app/data/who_to_follow/web_personalized_proxy","app/ui/who_to_follow/web_personalized_settings","app/ui/who_to_follow/web_personalized_signup"],function(module, require, exports) {
var bootApp=require("app/boot/app"),loggedOutBoot=require("app/boot/logged_out"),WebPersonalizedScribe=require("app/data/who_to_follow/web_personalized_scribe"),WebPersonalizedProxy=require("app/data/who_to_follow/web_personalized_proxy"),WebPersonalizedSettings=require("app/ui/who_to_follow/web_personalized_settings"),WebPersonalizedSignup=require("app/ui/who_to_follow/web_personalized_signup");module.exports=function(b){bootApp(b),loggedOutBoot(b),WebPersonalizedScribe.attachTo(document,b),WebPersonalizedProxy.attachTo(document,b),WebPersonalizedSettings.attachTo("#web-personalization",b),WebPersonalizedSignup.attachTo(".web-personalization-signup",b)}
});