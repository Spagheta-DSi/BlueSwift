define("app/ui/login_verification_form",["module","require","exports","core/component","app/utils/params"],function(module, require, exports) {
function loginVerificationForm(){this.defaultAttrs({pollInterval:1e3,errorRedirect:"/?login_verification_error=BadSessionLoginVerification"}),this.redirectToErrorPage=function(a,b){this.redirect(this.attr.errorRedirect)},this.checkLoginVerificationSuccess=function(a,b){if(!b.verified&&!b.error_status){this.timer=setTimeout(function(){this.attr.pollInterval+=this.attr.pollInterval*.05,this.triggerVerificationRequest()}.bind(this),this.attr.pollInterval);return}if(b.error_status)this.redirectToErrorPage(b,b.error);else if(b.verified){var c=this.getRedirectUrl();c&&c.match(TwitterSafeRedirectRegex)?this.redirect(c):this.redirect("/")}},this.triggerVerificationRequest=function(){this.trigger("uiCheckLoginVerification",this.getQueryParams())},this.cancelVerificationRequest=function(){clearTimeout(this.timer)},this.redirect=function(a){window.location=a},this.getQueryParams=function(){return params.fromQuery(window.location)},this.getRedirectUrl=function(){return decodeURIComponent(this.getQueryParams().redirect_after_login_verification)},this.after("initialize",function(){this.on("dataLoginVerificationSuccess",this.checkLoginVerificationSuccess),this.on("dataLoginVerificationError",this.redirectToErrorPage),this.on("uiSwiftLoaded uiPageChanged",this.triggerVerificationRequest),this.before("teardown",this.cancelVerificationRequest)})}var defineComponent=require("core/component"),params=require("app/utils/params"),TwitterSafeRedirectRegex="^(https?://([a-zA-Z0-9_\\.-]+\\.)?twitter\\.com(:\\d+)?)?(/\\S*)?$",LoginVerificationForm=defineComponent(loginVerificationForm);module.exports=LoginVerificationForm
});
define("app/data/login_verification",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function loginVerificationData(){this.checkLoginVerificationData=function(a,b){this.get({url:"/account/login_verification/is_verified",data:b,success:"dataLoginVerificationSuccess",error:"dataLoginVerificationError"})},this.after("initialize",function(){this.on("uiCheckLoginVerification",this.checkLoginVerificationData)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(loginVerificationData,withData)
});
define("app/pages/login_verification_page",["module","require","exports","app/boot/common","app/ui/login_verification_form","app/data/login_verification"],function(module, require, exports) {
var boot=require("app/boot/common"),LoginVerificationForm=require("app/ui/login_verification_form"),LoginVerificationData=require("app/data/login_verification");module.exports=function(a){boot(a),$("#token").length==0&&(LoginVerificationData.attachTo(document,a),LoginVerificationForm.attachTo(document,a))}
});