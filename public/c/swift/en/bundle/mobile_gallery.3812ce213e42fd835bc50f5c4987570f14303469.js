define("app/ui/dialogs/mobile_gallery_download_dialog",["module","require","exports","core/component","app/ui/with_dialog","app/ui/with_position","app/data/with_scribe"],function(module, require, exports) {
function mobileGalleryDownloadDialog(){this.defaults={width:500,formSelector:".dialog-form",emailField:"input[name=email]",notification:".notification"},this.after("initialize",function(){this.on(document,"uiOpenMobileGalleryDownloadDialog",this.open),this.on(document,"uiCloseMobileGalleryDownloadDialog",this.close)})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),withPosition=require("app/ui/with_position"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(mobileGalleryDownloadDialog,withDialog,withPosition)
});
define("app/ui/mobile_gallery/gallery_buttons",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function galleryButtons(){this.defaults={downloadButtonSelector:".download-now",appDownloadButtonSelector:".app-download .signup-btn"},this.showMobileGalleryDownloadDialog=function(a,b){this.scribe({component:"download_button",action:"click"}),this.trigger("uiOpenMobileGalleryDownloadDialog")},this.appDownloadButtonClicked=function(a,b){this.scribe({component:"download_button",action:"click"})},this.after("initialize",function(){this.on(this.attr.downloadButtonSelector,"click",this.showMobileGalleryDownloadDialog),this.on(this.attr.appDownloadButtonSelector,"click",this.appDownloadButtonClicked)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(galleryButtons,withScribe)
});
define("app/ui/forms/mobile_gallery_email_form",["module","require","exports","core/component","app/data/with_scribe","core/i18n"],function(module, require, exports) {
function mobileGalleryEmailForm(){this.defaults={emailField:"input[name=email]",appIdField:"input[name=appId]",notification:".notification"},this.emailValid=function(){var a=this.select("emailField").val();return a.match(/.+@[^.]+\.[^.][^.]+/)},this.notificationSentSuccess=function(a){this.trigger("uiShowMessage",{message:_('An email has been sent to your address')}),this.trigger("uiCloseMobileGalleryDownloadDialog"),this.scribe({component:"send_link_form",action:"notification_sent"})},this.notificationSentError=function(a,b){var c;b.error?(c=b.error,this.select("notification").html(b.error).fadeIn()):(b.errors&&b.errors[0].message?c=b.errors[0].message:c=_('Whoops! Something went wrong. Please try again!'),this.trigger("uiShowError",{message:c}),this.trigger("uiCloseMobileGalleryDownloadDialog"))},this.showNotification=function(a){this.emailValid()?this.select("notification").fadeOut():this.select("notification").html(_('This email is invalid.')).fadeIn()},this.formSubmit=function(a){a.preventDefault();var b=this.select("emailField").val(),c=this.select("appIdField").val();return this.emailValid()&&this.trigger("uiSendDownloadLink",{email:b,appId:c}),!1},this.after("initialize",function(){this.on("keyup",{emailField:this.showNotification}),this.on("submit",this.formSubmit),this.on(document,"dataSendDownloadLinkSuccess",this.notificationSentSuccess),this.on(document,"dataSendDownloadLinkError",this.notificationSentError)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe"),_=require("core/i18n");module.exports=defineComponent(mobileGalleryEmailForm,withScribe)
});
define("app/data/mobile_gallery/send_download_link",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function sendDownloadLink(){this.sendLink=function(a,b){var c={email:b.email};b.appId&&(c.app_id=b.appId),$("html").attr("lang")&&(c.lang=$("html").attr("lang")),this.post({url:"/download/send_link",data:c,eventData:b,success:"dataSendDownloadLinkSuccess",error:"dataSendDownloadLinkError"})},this.after("initialize",function(){this.on("uiSendDownloadLink",this.sendLink)})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),SendDownloadLink=defineComponent(sendDownloadLink,withData);module.exports=SendDownloadLink
});
define("app/pages/mobile_gallery/gallery",["module","require","exports","app/boot/app","app/ui/dialogs/mobile_gallery_download_dialog","app/ui/mobile_gallery/gallery_buttons","app/ui/forms/mobile_gallery_email_form","app/data/mobile_gallery/send_download_link"],function(module, require, exports) {
var bootApp=require("app/boot/app"),MobileGalleryDownloadDialog=require("app/ui/dialogs/mobile_gallery_download_dialog"),GalleryButtons=require("app/ui/mobile_gallery/gallery_buttons"),MobileGalleryEmailForm=require("app/ui/forms/mobile_gallery_email_form"),SendDownloadLink=require("app/data/mobile_gallery/send_download_link");module.exports=function(b){bootApp(b),MobileGalleryEmailForm.attachTo(".dialog-form",b),MobileGalleryDownloadDialog.attachTo("#mobile_gallery_download_dialog",b),GalleryButtons.attachTo(".mobile-download"),SendDownloadLink.attachTo(document,b)}
});
define("app/pages/mobile_gallery/apps",["module","require","exports","app/boot/app","app/ui/forms/mobile_gallery_email_form","app/ui/mobile_gallery/gallery_buttons","app/data/mobile_gallery/send_download_link"],function(module, require, exports) {
var bootApp=require("app/boot/app"),MobileGalleryEmailForm=require("app/ui/forms/mobile_gallery_email_form"),GalleryButtons=require("app/ui/mobile_gallery/gallery_buttons"),SendDownloadLink=require("app/data/mobile_gallery/send_download_link");module.exports=function(b){bootApp(b),MobileGalleryEmailForm.attachTo(".dialog-form",b),GalleryButtons.attachTo(".app-download"),SendDownloadLink.attachTo(document,b)}
});
define("app/ui/mobile_gallery/firefox_tweet_button",["module","require","exports","core/component"],function(module, require, exports) {
function firefoxTweetButton(){this.activateTweetButton=function(a){a.preventDefault();var b=["width=550","height=370","toolbar=no","location=no","status=no","menubar=no"],c=window.open(this.$node.attr("href"),"Tweet",b.join(","));return c.focus(),a.preventDefault(),!1},this.after("initialize",function(){this.on("click",this.activateTweetButton)})}var defineComponent=require("core/component");module.exports=defineComponent(firefoxTweetButton)
});
define("app/pages/mobile_gallery/firefox",["module","require","exports","app/boot/app","app/ui/mobile_gallery/firefox_tweet_button"],function(module, require, exports) {
var bootApp=require("app/boot/app"),FirefoxTweetButton=require("app/ui/mobile_gallery/firefox_tweet_button");module.exports=function(b){bootApp(b),FirefoxTweetButton.attachTo(".firefox-tweet-button")}
});
define("app/data/mobile_gallery/download_links_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function downloadLinksScribe(){this.scribeDownloadLink=function(a,b){var c=a.target.className;c.indexOf("all-devices")!=-1?this.scribe({component:"download_links",element:"all_devices_link",action:"click"}):c.indexOf("app-store")!=-1?this.scribe({component:"download_links",element:"app_store_button",action:"click"}):c.indexOf("google-play")!=-1&&this.scribe({component:"download_links",element:"google_play_button",action:"click"})},this.after("initialize",function(){this.on("click",this.scribeDownloadLink)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(downloadLinksScribe,withScribe)
});
define("app/pages/mobile_gallery/splash",["module","require","exports","app/boot/common","app/boot/top_bar","app/data/mobile_gallery/download_links_scribe"],function(module, require, exports) {
var bootCommon=require("app/boot/common"),topBar=require("app/boot/top_bar"),DownloadLinksScribe=require("app/data/mobile_gallery/download_links_scribe");module.exports=function(b){bootCommon(b),topBar(b),DownloadLinksScribe.attachTo(document,b)}
});