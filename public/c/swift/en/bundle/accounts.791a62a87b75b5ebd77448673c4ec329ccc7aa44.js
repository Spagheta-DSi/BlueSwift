define("app/ui/account/password_reset_controls",["module","require","exports","core/component"],function(module, require, exports) {
function passwordResetControls(){this.defaultAttrs({passwordSelector:"#user_password"}),this.after("initialize",function(){this.select("passwordSelector").focus()})}var defineComponent=require("core/component");module.exports=defineComponent(passwordResetControls)
});
define("app/ui/password_match_pair",["module","require","exports","core/component"],function(module, require, exports) {
function passwordMatchPair(){this.defaultAttrs({passwordSelector:"#user_password",passwordConfirmSelector:"#user_password_confirmation",feedbackSelector:"#password_match"}),this.showConfirmation=function(a){var b=this.select("passwordConfirmSelector");b.val()!=""&&(b.val()!=this.select("passwordSelector").val()?this.select("feedbackSelector").show():this.select("feedbackSelector").hide())},this.after("initialize",function(){this.on("keyup",this.showConfirmation)})}var defineComponent=require("core/component"),PasswordMatchPair=defineComponent(passwordMatchPair);module.exports=PasswordMatchPair
});
define("app/ui/with_password_strength",["module","require","exports","core/i18n"],function(module, require, exports) {
function withPasswordStrength(){this.defaultAttrs({minLength:6,requireStrong:!1,username:"",bannedPasswords:[]}),this.strength=function(b,c,d){function j(a,b){return b&&a.toLowerCase()===(""+b).toLowerCase()}function k(){return{score:0,message:_('Too Obvious'),reason:"obvious"}}function l(a,b){var c="";for(var d=0;d<b.length;d++){var e=!0;for(var f=0;f<a&&f+d+a<b.length;f++)e=e&&b.charAt(f+d)==b.charAt(f+d+a);f<a&&(e=!1),e?(d+=a-1,e=!1):c+=b.charAt(d)}return c}var e=0,c=c||this.attr.username;if(b.length<this.attr.minLength)return{score:b.length,message:_('Too Short'),reason:"tooshort"};if(j(b,c))return k();if(j(b,d))return k();if(this.attr.bannedPasswords.indexOf(b.toLowerCase())>-1)return k();if(this.attr.requireStrong){var f=10,g="# ` ~ ! @ $ % ^ & * ( ) - _ = + [ ] { } \\ | ; : ' \" , . < > / ?".split(" ");g=g.map(function(a){return"\\"+a}).join("");var h=["\\d","[a-z]","[A-Z]","["+g+"]"],i=h.map(function(a){return"(?=.*"+a+")"}).join("");if(!b.match(new RegExp("("+i+"){10,}")))return{score:0,message:_('Too Weak'),reason:"tooweak"}}e+=b.length*4,e+=(l(1,b).length-b.length)*1,e+=(l(2,b).length-b.length)*1,e+=(l(3,b).length-b.length)*1,e+=(l(4,b).length-b.length)*1,b.match(/(.*[0-9].*[0-9].*[0-9])/)&&(e+=5),b.match(/(.*[!@#$%^&*?_~].*[!@#$%^&*?_~])/)&&(e+=5),b.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(e+=10),b.match(/([a-zA-Z])/)&&b.match(/([0-9])/)&&(e+=15),b.match(/([!@#$%^&*?_~])/)&&b.match(/([0-9])/)&&(e+=15),b.match(/([!@#$%^&*?_~])/)&&b.match(/([a-zA-Z])/)&&(e+=15);if(b.match(/^\w+$/)||b.match(/^\d+$/))e-=10;return e<0&&(e=0),e>100&&(e=100),e<34?{score:e,message:_('Weak'),reason:"weak"}:e<50?{score:e,message:_('Good'),reason:"good"}:e<75?{score:e,message:_('Strong'),reason:"strong"}:{score:e,message:_('Very Strong'),reason:"verystrong"}},this.undoBannedPasswordROT13=function(){var a=[];for(var b=0,c=this.attr.bannedPasswords.length;b<c;b++)a.push(this.attr.bannedPasswords[b].replace(/[a-z]/gi,function(a){var b=a.charCodeAt(0),c=b+13;if(b<=90&&c>90||c>122)c-=26;return String.fromCharCode(c)}));this.attr.bannedPasswords=a},this.after("initialize",function(){this.attr.bannedPasswords.length&&this.undoBannedPasswordROT13()})}var _=require("core/i18n");module.exports=withPasswordStrength
});
define("app/ui/password_strength",["module","require","exports","core/component","app/ui/with_password_strength"],function(module, require, exports) {
function passwordStrengthField(){this.defaultAttrs({feedbackSelector:"#password_strength_feedback",inputSelector:"#user_password"}),this.hide=function(){this.select("feedbackSelector").hide()},this.checkStrength=function(a){var b=this.select("feedbackSelector"),c=this.select("inputSelector").val();c.length===0?b.hide():c.length&&b.show();if(c.length>0){var d=this.strength(c);b.text(d.message)}},this.after("initialize",function(){this.on("keyup",this.checkStrength),this.on("focus",this.checkStrength),this.on("blur",this.hide)})}var defineComponent=require("core/component"),withPasswordStrength=require("app/ui/with_password_strength"),PasswordStrengthField=defineComponent(passwordStrengthField,withPasswordStrength);module.exports=PasswordStrengthField
});
define("app/pages/account/password_reset",["module","require","exports","app/boot/app","app/ui/account/password_reset_controls","app/ui/password_match_pair","app/ui/password_strength"],function(module, require, exports) {
var bootApp=require("app/boot/app"),PasswordResetControls=require("app/ui/account/password_reset_controls"),PasswordMatchPair=require("app/ui/password_match_pair"),PasswordStrength=require("app/ui/password_strength");module.exports=function(b){bootApp(b),PasswordResetControls.attachTo("#password-reset-form"),PasswordMatchPair.attachTo("#password-match-pair",b),PasswordStrength.attachTo("#password_strength",b)}
});
define("app/ui/captcha_dialog",["module","require","exports","core/component","app/ui/with_dialog","app/ui/with_position"],function(module, require, exports) {
function captchaDialog(){this.defaultAttrs({cancelSelector:"#cancel_captcha_button",recaptchaSelector:"#recaptcha_response_field"}),this.openCaptchaDialog=function(){this.open(),this.select("recaptchaSelector").focus()},this.after("initialize",function(){this.on("click",{cancelSelector:this.close}),this.on(document,"uiOpenCaptchaDialog",this.openCaptchaDialog)})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),withPosition=require("app/ui/with_position"),CaptchaDialog=defineComponent(captchaDialog,withDialog,withPosition);module.exports=CaptchaDialog
});
define("app/ui/account/resend_password_controls",["module","require","exports","core/component"],function(module, require, exports) {
function resendPasswordControls(){this.defaultAttrs({submitSelector:"#lookup_user",captchaSelector:"#captcha_dialog",emailOrPhoneSelector:"#email_or_phone",usernameSelector:"#screen_name"}),this.willRequireCaptcha=function(){return this.select("captchaSelector").length>0},this.submitForm=function(a){return!this.dialogOpen&&this.willRequireCaptcha()?(this.dialogOpen=!0,this.trigger(document,"uiOpenCaptchaDialog"),a.preventDefault(),!1):(this.trigger("uiCloseDialog"),!0)},this.dialogClosed=function(){this.dialogOpen=!1},this.toggleEmailOrPhoneTextbox=function(){this.select("emailOrPhoneSelector").val()!=""?(this.select("usernameSelector").val(""),this.select("usernameSelector").attr("disabled",!0)):this.select("usernameSelector").attr("disabled",!1)},this.toggleUsernameTextbox=function(){this.select("usernameSelector").val()!=""?(this.select("emailOrPhoneSelector").val(""),this.select("emailOrPhoneSelector").attr("disabled",!0)):this.select("emailOrPhoneSelector").attr("disabled",!1)},this.after("initialize",function(){this.on("submit",this.submitForm),this.on("uiDialogClosed",this.dialogClosed),this.on(this.attr.emailOrPhoneSelector,"keyup paste",this.toggleEmailOrPhoneTextbox),this.on(this.attr.usernameSelector,"keyup paste",this.toggleUsernameTextbox),this.select("emailOrPhoneSelector").focus()})}var defineComponent=require("core/component");module.exports=defineComponent(resendPasswordControls)
});
define("app/ui/validating_fieldset",["module","require","exports","core/component","core/utils","core/i18n"],function(module, require, exports) {
function validatingInputFieldSet(){var a="ok",b="problem";this.defaultAttrs({emailCorrectionSelector:".js-email-correction",debounceTime:750}),this.updateWithValidation=function(a,b){this.displayFeedback(b.valid,!b.valid,b.msg,b.email_suggestion)},this.displayError=function(a,b){this.displayFeedback(!1,!0,_('An error occured'))},this.showMessages=function(d,e){this.$node.toggleClass(a,!!d),this.$node.toggleClass(b,!!e)},this.handleInput=function(b){var c=b.target.value;if(this._old==c)return;this.select("echoLabel").text(c),this.displayFeedback(!1,!1,_('Checking...'));var d={};d[this.attr.name.toLowerCase()]=c,d.value=c,this.trigger(this.attr.changeEvent,d),this._old=c},this.suggestEmail=function(a){var b="<a class = 'js-email-correction' href='#'>"+a+"</a>";this.select("notification").html(_('Did you mean {{link}}?',{link:b})),$(document).trigger("uiShowEmailCorrection"),this.select("emailCorrectionSelector").click(function(b){$(document).trigger("uiClickEmailCorrection"),this.select("input").val(a).trigger("updateNow")}.bind(this))},this.displayFeedback=function(b,c,d,e){function f(){this.showMessages(b,c),e?this.suggestEmail(e):$(this.attr.notification).text(d),$(this.attr.notification).show()}if(!d){this.showMessages(b,c);return}$(this.attr.notification).hide(0,f.bind(this))},this.after("initialize",function(){this._old=$(this.attr.input).val(),this.on(document,"data"+this.attr.name+"Result",this.updateWithValidation),this.on(document,"data"+this.attr.name+"Error",this.displayError),this.on("keyup",utils.debounce(this.handleInput,this.attr.debounceTime)),this.on("updateNow",this.handleInput)})}var defineComponent=require("core/component"),utils=require("core/utils"),_=require("core/i18n"),ValidatingInputFieldSet=defineComponent(validatingInputFieldSet);module.exports=ValidatingInputFieldSet
});
define("app/data/resend_password",["module","require","exports","core/component","app/data/with_auth_token","app/data/with_data","core/i18n"],function(module, require, exports) {
function resendPasswordData(){var a=/^[@ï¼ ]?([a-zA-Z0-9_]{1,22})$/;this.verifyEmailOrPhone=function(a,b){b.emailorphone===""?this.trigger("dataEmailOrPhoneResult",{valid:!0,msg:_(' ')}):b.emailorphone.match(/\s/)?this.trigger("dataEmailOrPhoneResult",{valid:!1,msg:_('Email or phone cannot include spaces')}):this.get({url:"/account/valid_email_or_phone",eventData:b,data:b,success:"dataEmailOrPhoneResult",error:"dataEmailOrPhoneError"})},this.verifyUsername=function(b,c){c.username===""?this.trigger("dataUsernameResult",{valid:!0,msg:_(' ')}):c.username.match(/\s/)?this.trigger("dataUsernameResult",{valid:!1,msg:_('Username cannot include spaces')}):c.username.match(a)?this.get({url:"/account/valid_username",eventData:c,data:c,success:"dataUsernameResult",error:"dataUsernameError"}):this.trigger("dataUsernameResult",{valid:!1,msg:_('Username is invalid')})},this.after("initialize",function(){this.on("uiEmailOrPhoneChange",this.verifyEmailOrPhone),this.on("uiUsernameChange",this.verifyUsername)})}var defineComponent=require("core/component"),withAuthToken=require("app/data/with_auth_token"),withData=require("app/data/with_data"),_=require("core/i18n");module.exports=defineComponent(resendPasswordData,withData,withAuthToken)
});
define("app/pages/account/resend_password",["module","require","exports","app/boot/app","app/ui/captcha_dialog","app/ui/account/resend_password_controls","app/ui/validating_fieldset","app/data/resend_password"],function(module, require, exports) {
var bootApp=require("app/boot/app"),CaptchaDialog=require("app/ui/captcha_dialog"),ResendPasswordControls=require("app/ui/account/resend_password_controls"),ValidatingInputFieldSet=require("app/ui/validating_fieldset"),ResendPasswordData=require("app/data/resend_password");module.exports=function(a){bootApp(a),ResendPasswordData.attachTo(document,a),ResendPasswordControls.attachTo("#resend_password_form",a),CaptchaDialog.attachTo("#captcha_dialog",a),ValidatingInputFieldSet.attachTo("#email_or_phone_fieldset",{name:"EmailOrPhone",input:"#email_or_phone",notification:"#email_or_phone_notification",changeEvent:"uiEmailOrPhoneChange"}),ValidatingInputFieldSet.attachTo("#screen_name_fieldset",{name:"Username",input:"#screen_name",notification:"#screen_name_notification",changeEvent:"uiUsernameChange"})}
});
define("app/ui/account/verify_personal_information_controls",["module","require","exports","core/component"],function(module, require, exports) {
function verifyPersonalInformationControls(){this.defaultAttrs({emailSelector:"#email",phoneSelector:"#phone"}),this.after("initialize",function(){this.select("emailSelector").length>0?this.select("emailSelector").focus():this.select("phoneSelector").focus()})}var defineComponent=require("core/component");module.exports=defineComponent(verifyPersonalInformationControls)
});
define("app/pages/account/verify_personal_information",["module","require","exports","app/boot/app","app/ui/account/verify_personal_information_controls"],function(module, require, exports) {
var bootApp=require("app/boot/app"),VerifyPersonalInformationControls=require("app/ui/account/verify_personal_information_controls");module.exports=function(b){bootApp(b),VerifyPersonalInformationControls.attachTo("#verify-personal-information-form")}
});
define("app/ui/account/verify_device_token_controls",["module","require","exports","core/component"],function(module, require, exports) {
function verifyDeviceTokenControls(){this.defaultAttrs({tokenSelector:"#token"}),this.after("initialize",function(){this.select("tokenSelector").focus()})}var defineComponent=require("core/component");module.exports=defineComponent(verifyDeviceTokenControls)
});
define("app/pages/account/verify_device_token",["module","require","exports","app/boot/app","app/ui/account/verify_device_token_controls"],function(module, require, exports) {
var bootApp=require("app/boot/app"),VerifyDeviceTokenControls=require("app/ui/account/verify_device_token_controls");module.exports=function(b){bootApp(b),VerifyDeviceTokenControls.attachTo("#verify-device-token-form")}
});
define("app/ui/account/resend_password_help_controls",["module","require","exports","core/component","core/i18n"],function(module, require, exports) {
function resendPasswordHelpControls(){this.defaultAttrs({yesButtonSelector:"#yes_button",noButtonSelector:"#no_button",yesNoButtonsSelector:"#yes_no_buttons",alternateChoiceSelector:"#alternate_choice",verifyPhoneSelector:"#verify_phone",verifyDomainSelector:"#verify_domain",resendEmailSelector:"#resend_email",phoneDigitsSelector:"#phone_digits",emailDomainSelector:".email_domain",contactSupportSelector:".contact_support",requestSmsSelector:"#request_sms",startSelector:"#resend_password_help_start",topElementSelector:".top-element",resendTypeSelector:"#resend_type"});var a=["alternateChoiceSelector","verifyPhoneSelector","verifyDomainSelector","resendEmailSelector"];this.showNext=function(a,b){var c=_('No'),d="contactSupportSelector";switch(b.resend_step){case"verify_phone":d="verifyPhoneSelector",this.select("phoneDigitsSelector").html(b.phone_digits);break;case"verify_domain":d="verifyDomainSelector",this.select("emailDomainSelector").html(b.email_domain);break;case"alternate_choice":d="alternateChoiceSelector",c=_("No, I want to reset by "+this.getResendType()+".");break;case"resend_email":this.showResendEmail();return;case"contact_support":this.showContactSupport();return}this.showStep(d,c)},this.showResendEmail=function(){this.showStep("resendEmailSelector",_('No, I don\'t have access to that email address.'))},this.showContactSupport=function(){this.trigger("uiShowContactSupport"),this.showStep("contactSupportSelector")},this.yesClick=function(a,b){b||(b={}),b.username=this.select("usernameSelector").val(),this.select("verifyPhoneSelector").is(":visible")?this.showStep("requestSmsSelector"):this.select("alternateChoiceSelector").is(":visible")?(b.try_resend_by=this.getAlternateResendType(),this.trigger("uiChoosePasswordResendType",b)):this.select("verifyDomainSelector").is(":visible")?this.showResendEmail():this.select("resendEmailSelector").is(":visible")&&(b.try_resend_by="email",this.trigger("uiResendPassword",b))},this.noClick=function(a,b){b||(b={}),b.username=this.select("usernameSelector").val(),this.select("verifyPhoneSelector").is(":visible")?(this.trigger("uiResendPasswordHelpNoButtonClicked",{helpState:"phone_hint"}),this.showContactSupport()):this.select("alternateChoiceSelector").is(":visible")?(b.try_resend_by=this.getResendType(),this.trigger("uiChoosePasswordResendType",b)):this.select("verifyDomainSelector").is(":visible")?(this.trigger("uiResendPasswordHelpNoButtonClicked",{helpState:"email_hint"}),this.showContactSupport()):this.select("resendEmailSelector").is(":visible")&&(this.trigger("uiResendPasswordHelpNoButtonClicked",{helpState:"email_access"}),this.showContactSupport())},this.resendPasswordForScreenNameResult=function(a,b){window.location=b.href},this.genericError=function(a,b){this.trigger("uiShowMessage",{message:_('Sorry, there was a problem. Try again later.')})},this.showStep=function(b,c){this.select("topElementSelector").hide(),this.select(b).show(),$.inArray(b,a)>=0&&(this.select("noButtonSelector").html(c),this.select("yesNoButtonsSelector").show())},this.getResendType=function(){return this.select("resendTypeSelector").val()},this.getAlternateResendType=function(){return this.getResendType()=="email"?"phone":"email"},this.after("initialize",function(){this.on(this.select("yesButtonSelector"),"click",this.yesClick),this.on(this.select("noButtonSelector"),"click",this.noClick),this.on(document,"dataResendTypeResult",this.showNext),this.on(document,"dataResendPasswordForScreenNameSuccess",this.resendPasswordForScreenNameResult),this.on(document,"dataResendPasswordForScreenNameError",this.genericError),this.on(document,"dataResendTypeError",this.genericError)})}var defineComponent=require("core/component"),_=require("core/i18n");module.exports=defineComponent(resendPasswordHelpControls)
});
define("app/data/resend_password_help",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function resendPasswordHelpData(){this.resendPasswordByType=function(a,b){this.get({url:"/account/resend_password_by_type",eventData:b,data:b,success:"dataResendTypeResult",error:"dataResendTypeError"})},this.resendPasswordById=function(a,b){this.post({url:"/account/resend_password_for_id",eventData:b,data:b,success:"dataResendPasswordForScreenNameSuccess",error:"dataResendPasswordForScreenNameError"})},this.after("initialize",function(){this.on("uiChoosePasswordResendType",this.resendPasswordByType),this.on("uiResendPassword",this.resendPasswordById)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(resendPasswordHelpData,withData)
});
define("app/data/resend_password_help_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function resendPasswordHelpScribe(){this.scribeNoButtonClick=function(a,b){this.scribe({component:b.helpState,element:"no_button",action:"click"})},this.scribeContactSupport=function(a,b){this.scribe({component:"contact_support",action:"impression"})},this.after("initialize",function(){this.on("uiResendPasswordHelpNoButtonClicked",this.scribeNoButtonClick),this.on("uiShowContactSupport",this.scribeContactSupport)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(resendPasswordHelpScribe,withScribe)
});
define("app/pages/account/resend_password_help",["module","require","exports","app/boot/app","app/ui/account/resend_password_help_controls","app/data/resend_password_help","app/data/resend_password_help_scribe"],function(module, require, exports) {
var bootApp=require("app/boot/app"),ResendPasswordHelpControls=require("app/ui/account/resend_password_help_controls"),ResendPasswordHelpData=require("app/data/resend_password_help"),ResendPasswordHelpScribe=require("app/data/resend_password_help_scribe");module.exports=function(a){bootApp(a),ResendPasswordHelpData.attachTo(document,a),ResendPasswordHelpScribe.attachTo(document,a),ResendPasswordHelpControls.attachTo("#resend_password_help",a)}
});
define("app/pages/account/errors",["module","require","exports","app/boot/app"],function(module, require, exports) {
var bootApp=require("app/boot/app");module.exports=function(b){bootApp(b)}
});